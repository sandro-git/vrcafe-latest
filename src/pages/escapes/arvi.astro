---
// Welcome to Astro! Everything between these triple-dash code fences
// is your "component frontmatter". It never runs in the browser.
import { getCollection } from "astro:content";
import type { SanityDocument } from "@sanity/client";
import { loadQuery } from "../../sanity/lib/load-query";

//components
import BaseLayout from "../../layouts/BaseLayout.astro";
import GamesLayout from "../../layouts/GamesLayout.astro";
//data
// const ARVIgames = await getCollection(
//   "games",
//   (game) => game.data.editor === "ARVI"
// );
const { data: ARVIgames } = await loadQuery<SanityDocument>({
  query: `*[_type == "escapeGames" && slug.current == $slug][0]`,
});
---

<!-- TO DO :netlify cloudinary integration to optimize images -->
<BaseLayout>
  <GamesLayout games={ARVIgames} />
</BaseLayout>
