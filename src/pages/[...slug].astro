---
import BaseLayout from "../layouts/BaseLayout.astro";
import Youtube from "@components/Youtube.astro";
import type { InferGetStaticParamsType, InferGetStaticPropsType } from 'astro';
import type { GetStaticPaths } from 'astro';

import { sanityClient } from "sanity:client";

export const prerender = true;

export const getStaticPaths= (async () => {
  const gamesSanity = await sanityClient.fetch(`*[_type == "escapeGames"]`);

  return gamesSanity.map((game) => {
    return {
      params: { slug: game.slug.current },
      props: { game }
    }
  });
}) satisfies GetStaticPaths

type Params = InferGetStaticParamsType<typeof getStaticPaths>;
type Props = InferGetStaticPropsType<typeof getStaticPaths>;

const { slug } = Astro.params as Params;
const { game } = Astro.props as Props;

---

<BaseLayout>
  <div class="grid place-items-center">
    <h1
      id=`${slug}`
      class="my-8 text-center text-4xl font-extrabold leading-none tracking-tight text-gray-900 md:text-5xl lg:text-6xl dark:text-white"
    >
      {game.name}
    </h1>
    <Youtube videoId={game.youtube} /> 
    <p class="dark:text-white p-8 lg:w-1/2" >{game.text}</p>
  </div>
</BaseLayout>
